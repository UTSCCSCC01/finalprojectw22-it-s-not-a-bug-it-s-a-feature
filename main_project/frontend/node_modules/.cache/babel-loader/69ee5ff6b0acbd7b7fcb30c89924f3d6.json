{"ast":null,"code":"import _classCallCheck from\"C:/Users/sasan/OneDrive/Desktop/new s4/finalprojectw22-it-s-not-a-bug-it-s-a-feature/main_project/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/sasan/OneDrive/Desktop/new s4/finalprojectw22-it-s-not-a-bug-it-s-a-feature/main_project/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/sasan/OneDrive/Desktop/new s4/finalprojectw22-it-s-not-a-bug-it-s-a-feature/main_project/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/sasan/OneDrive/Desktop/new s4/finalprojectw22-it-s-not-a-bug-it-s-a-feature/main_project/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import axios from'axios';import{Link}from'react-router-dom';import'./LiveStreams.scss';import config from'./config/default';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Navbar=/*#__PURE__*/function(_React$Component){_inherits(Navbar,_React$Component);var _super=_createSuper(Navbar);function Navbar(props){var _this;_classCallCheck(this,Navbar);_this=_super.call(this,props);_this.state={live_streams:[]};return _this;}_createClass(Navbar,[{key:\"componentDidMount\",value:function componentDidMount(){this.getLiveStreams();}},{key:\"getLiveStreams\",value:function getLiveStreams(){var _this2=this;axios.get('http://127.0.0.1:'+config.rtmp_server.http.port+'/api/streams').then(function(res){var streams=res.data;if(typeof(streams['live']!=='undefined')){_this2.getStreamsInfo(streams['live']);}});}},{key:\"getStreamsInfo\",value:function getStreamsInfo(live_streams){var _this3=this;axios.get('/streams/info',{params:{streams:live_streams}}).then(function(res){_this3.setState({live_streams:res.data},function(){console.log(_this3.state);});});}},{key:\"render\",value:function render(){var streams=this.state.live_streams.map(function(stream,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"stream col-xs-12 col-sm-12 col-md-3 col-lg-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"live-label\",children:\"LIVE\"}),/*#__PURE__*/_jsx(Link,{to:'/stream/'+stream.username,children:/*#__PURE__*/_jsx(\"div\",{className:\"stream-thumbnail\",children:/*#__PURE__*/_jsx(\"img\",{src:'/thumbnails/'+stream.stream_key+'.png'})})}),/*#__PURE__*/_jsx(\"span\",{className:\"username\",children:/*#__PURE__*/_jsx(Link,{to:'/stream/'+stream.username,children:stream.username})})]},index);});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Live Streams\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"streams row\",children:streams})]});}}]);return Navbar;}(React.Component);export{Navbar as default};","map":{"version":3,"sources":["C:/Users/sasan/OneDrive/Desktop/new s4/finalprojectw22-it-s-not-a-bug-it-s-a-feature/main_project/frontend/src/LiveStreams.js"],"names":["React","axios","Link","config","Navbar","props","state","live_streams","getLiveStreams","get","rtmp_server","http","port","then","res","streams","data","getStreamsInfo","params","setState","console","log","map","stream","index","username","stream_key","Component"],"mappings":"gvBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,MAAO,oBAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,C,2FAGqBC,CAAAA,M,4GAEjB,gBAAYC,KAAZ,CAAmB,wCACf,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACTC,YAAY,CAAE,EADL,CAAb,CAFe,aAKlB,C,oDAED,4BAAoB,CAChB,KAAKC,cAAL,GACH,C,8BAED,yBAAiB,iBACbP,KAAK,CAACQ,GAAN,CAAU,oBAAsBN,MAAM,CAACO,WAAP,CAAmBC,IAAnB,CAAwBC,IAA9C,CAAqD,cAA/D,EACKC,IADL,CACU,SAAAC,GAAG,CAAI,CACT,GAAIC,CAAAA,OAAO,CAAGD,GAAG,CAACE,IAAlB,CACA,GAAI,OAAQD,OAAO,CAAC,MAAD,CAAP,GAAoB,WAA5B,CAAJ,CAA8C,CAC1C,MAAI,CAACE,cAAL,CAAoBF,OAAO,CAAC,MAAD,CAA3B,EACH,CACJ,CANL,EAOH,C,8BAED,wBAAeR,YAAf,CAA6B,iBACzBN,KAAK,CAACQ,GAAN,CAAU,eAAV,CAA2B,CACvBS,MAAM,CAAE,CACJH,OAAO,CAAER,YADL,CADe,CAA3B,EAIGM,IAJH,CAIQ,SAAAC,GAAG,CAAI,CACX,MAAI,CAACK,QAAL,CAAc,CACVZ,YAAY,CAAEO,GAAG,CAACE,IADR,CAAd,CAEG,UAAM,CACLI,OAAO,CAACC,GAAR,CAAY,MAAI,CAACf,KAAjB,EACH,CAJD,EAKH,CAVD,EAWH,C,sBAED,iBAAS,CACL,GAAIS,CAAAA,OAAO,CAAG,KAAKT,KAAL,CAAWC,YAAX,CAAwBe,GAAxB,CAA4B,SAACC,MAAD,CAASC,KAAT,CAAmB,CACzD,mBACI,aAAK,SAAS,CAAC,8CAAf,wBACI,aAAM,SAAS,CAAC,YAAhB,kBADJ,cAEI,KAAC,IAAD,EAAM,EAAE,CAAE,WAAaD,MAAM,CAACE,QAA9B,uBACI,YAAK,SAAS,CAAC,kBAAf,uBACI,YAAK,GAAG,CAAE,eAAiBF,MAAM,CAACG,UAAxB,CAAqC,MAA/C,EADJ,EADJ,EAFJ,cAQI,aAAM,SAAS,CAAC,UAAhB,uBACI,KAAC,IAAD,EAAM,EAAE,CAAE,WAAaH,MAAM,CAACE,QAA9B,UACKF,MAAM,CAACE,QADZ,EADJ,EARJ,GAAmED,KAAnE,CADJ,CAgBH,CAjBa,CAAd,CAmBA,mBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,oCADJ,cAEI,WAAI,SAAS,CAAC,MAAd,EAFJ,cAII,YAAK,SAAS,CAAC,aAAf,UACKT,OADL,EAJJ,GADJ,CAUH,C,oBAnE+Bf,KAAK,CAAC2B,S,SAArBvB,M","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport {Link} from 'react-router-dom';\r\nimport './LiveStreams.scss';\r\nimport config from './config/default';\r\n \r\n \r\nexport default class Navbar extends React.Component {\r\n \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            live_streams: []\r\n        }\r\n    }\r\n \r\n    componentDidMount() {\r\n        this.getLiveStreams();\r\n    }\r\n \r\n    getLiveStreams() {\r\n        axios.get('http://127.0.0.1:' + config.rtmp_server.http.port + '/api/streams')\r\n            .then(res => {\r\n                let streams = res.data;\r\n                if (typeof (streams['live'] !== 'undefined')) {\r\n                    this.getStreamsInfo(streams['live']);\r\n                }\r\n            });\r\n    }\r\n \r\n    getStreamsInfo(live_streams) {\r\n        axios.get('/streams/info', {\r\n            params: {\r\n                streams: live_streams\r\n            }\r\n        }).then(res => {\r\n            this.setState({\r\n                live_streams: res.data\r\n            }, () => {\r\n                console.log(this.state);\r\n            });\r\n        });\r\n    }\r\n \r\n    render() {\r\n        let streams = this.state.live_streams.map((stream, index) => {\r\n            return (\r\n                <div className=\"stream col-xs-12 col-sm-12 col-md-3 col-lg-4\" key={index}>\r\n                    <span className=\"live-label\">LIVE</span>\r\n                    <Link to={'/stream/' + stream.username}>\r\n                        <div className=\"stream-thumbnail\">\r\n                            <img src={'/thumbnails/' + stream.stream_key + '.png'}/>\r\n                        </div>\r\n                    </Link>\r\n \r\n                    <span className=\"username\">\r\n                        <Link to={'/stream/' + stream.username}>\r\n                            {stream.username}\r\n                        </Link>\r\n                    </span>\r\n                </div>\r\n            );\r\n        });\r\n \r\n        return (\r\n            <div className=\"container mt-5\">\r\n                <h4>Live Streams</h4>\r\n                <hr className=\"my-4\"/>\r\n \r\n                <div className=\"streams row\">\r\n                    {streams}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}